// <auto-generated />
using System;
using HotelBooking.Models;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace HotelBooking.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20250411110302_hoteldb")]
    partial class hoteldb
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.4")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("HotelBooking.Models.DanhGia", b =>
                {
                    b.Property<int>("MaDG")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaDG"));

                    b.Property<string>("BinhLuan")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("MaND")
                        .HasColumnType("int");

                    b.Property<DateTime>("NgayDanhGia")
                        .HasColumnType("datetime2");

                    b.Property<int>("NguoiDungMaND")
                        .HasColumnType("int");

                    b.HasKey("MaDG");

                    b.HasIndex("NguoiDungMaND");

                    b.ToTable("DanhGias");
                });

            modelBuilder.Entity("HotelBooking.Models.DatDichVu", b =>
                {
                    b.Property<int>("MaDDV")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaDDV"));

                    b.Property<int>("MaDP")
                        .HasColumnType("int");

                    b.Property<int>("MaDV")
                        .HasColumnType("int");

                    b.Property<int>("SoLuong")
                        .HasColumnType("int");

                    b.Property<decimal>("TongTien")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("MaDDV");

                    b.HasIndex("MaDP");

                    b.HasIndex("MaDV");

                    b.ToTable("DatDichVus");
                });

            modelBuilder.Entity("HotelBooking.Models.DatPhong", b =>
                {
                    b.Property<int>("MaDP")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaDP"));

                    b.Property<int>("KhuyenMaiMaKM")
                        .HasColumnType("int");

                    b.Property<int?>("MaKM")
                        .HasColumnType("int");

                    b.Property<int>("MaND")
                        .HasColumnType("int");

                    b.Property<int>("MaP")
                        .HasColumnType("int");

                    b.Property<int>("NguoiDungMaND")
                        .HasColumnType("int");

                    b.Property<int>("PhongMaP")
                        .HasColumnType("int");

                    b.Property<DateTime>("ThoiGianCheckIn")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("ThoiGianCheckOut")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("ThoiGianDat")
                        .HasColumnType("datetime2");

                    b.Property<decimal>("TongTien")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("TrangThai")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaDP");

                    b.HasIndex("KhuyenMaiMaKM");

                    b.HasIndex("NguoiDungMaND");

                    b.HasIndex("PhongMaP");

                    b.ToTable("DatPhongs");
                });

            modelBuilder.Entity("HotelBooking.Models.DichVu", b =>
                {
                    b.Property<int>("MaDV")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaDV"));

                    b.Property<decimal>("Gia")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("KieuDichVu")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaDV");

                    b.ToTable("DichVus");
                });

            modelBuilder.Entity("HotelBooking.Models.KhuyenMai", b =>
                {
                    b.Property<int>("MaKM")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaKM"));

                    b.Property<DateTime>("NgayBatDau")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("NgayKetThuc")
                        .HasColumnType("datetime2");

                    b.Property<float>("PhanTramKM")
                        .HasColumnType("real");

                    b.Property<string>("TenKM")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("TrangThai")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaKM");

                    b.ToTable("KhuyenMais");
                });

            modelBuilder.Entity("HotelBooking.Models.LoaiPhong", b =>
                {
                    b.Property<int>("MaLP")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaLP"));

                    b.Property<string>("LoaiPhongName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaLP");

                    b.ToTable("LoaiPhongs");
                });

            modelBuilder.Entity("HotelBooking.Models.NguoiDung", b =>
                {
                    b.Property<int>("MaND")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaND"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("MatKhau")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("SDT")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Ten")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("VaiTro")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaND");

                    b.ToTable("NguoiDungs");
                });

            modelBuilder.Entity("HotelBooking.Models.Phong", b =>
                {
                    b.Property<int>("MaP")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaP"));

                    b.Property<decimal>("GiaPhong")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("LoaiPhongMaLP")
                        .HasColumnType("int");

                    b.Property<int>("MaLP")
                        .HasColumnType("int");

                    b.Property<string>("TrangThai")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaP");

                    b.HasIndex("LoaiPhongMaLP");

                    b.ToTable("Phongs");
                });

            modelBuilder.Entity("HotelBooking.Models.ThanhToan", b =>
                {
                    b.Property<int>("MaTT")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MaTT"));

                    b.Property<int>("MaDP")
                        .HasColumnType("int");

                    b.Property<decimal>("TienThanhToan")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("TongNgayO")
                        .HasColumnType("int");

                    b.Property<string>("TrangThai")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MaTT");

                    b.HasIndex("MaDP")
                        .IsUnique();

                    b.ToTable("ThanhToans");
                });

            modelBuilder.Entity("HotelBooking.Models.DanhGia", b =>
                {
                    b.HasOne("HotelBooking.Models.NguoiDung", "NguoiDung")
                        .WithMany("DanhGias")
                        .HasForeignKey("NguoiDungMaND")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("NguoiDung");
                });

            modelBuilder.Entity("HotelBooking.Models.DatDichVu", b =>
                {
                    b.HasOne("HotelBooking.Models.DatPhong", "DatPhong")
                        .WithMany("DatDichVus")
                        .HasForeignKey("MaDP")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("HotelBooking.Models.DichVu", "DichVu")
                        .WithMany("DatDichVus")
                        .HasForeignKey("MaDV")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DatPhong");

                    b.Navigation("DichVu");
                });

            modelBuilder.Entity("HotelBooking.Models.DatPhong", b =>
                {
                    b.HasOne("HotelBooking.Models.KhuyenMai", "KhuyenMai")
                        .WithMany("DatPhongs")
                        .HasForeignKey("KhuyenMaiMaKM")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("HotelBooking.Models.NguoiDung", "NguoiDung")
                        .WithMany("DatPhongs")
                        .HasForeignKey("NguoiDungMaND")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("HotelBooking.Models.Phong", "Phong")
                        .WithMany("DatPhongs")
                        .HasForeignKey("PhongMaP")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("KhuyenMai");

                    b.Navigation("NguoiDung");

                    b.Navigation("Phong");
                });

            modelBuilder.Entity("HotelBooking.Models.Phong", b =>
                {
                    b.HasOne("HotelBooking.Models.LoaiPhong", "LoaiPhong")
                        .WithMany("Phongs")
                        .HasForeignKey("LoaiPhongMaLP")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("LoaiPhong");
                });

            modelBuilder.Entity("HotelBooking.Models.ThanhToan", b =>
                {
                    b.HasOne("HotelBooking.Models.DatPhong", "DatPhong")
                        .WithOne("ThanhToan")
                        .HasForeignKey("HotelBooking.Models.ThanhToan", "MaDP")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DatPhong");
                });

            modelBuilder.Entity("HotelBooking.Models.DatPhong", b =>
                {
                    b.Navigation("DatDichVus");

                    b.Navigation("ThanhToan")
                        .IsRequired();
                });

            modelBuilder.Entity("HotelBooking.Models.DichVu", b =>
                {
                    b.Navigation("DatDichVus");
                });

            modelBuilder.Entity("HotelBooking.Models.KhuyenMai", b =>
                {
                    b.Navigation("DatPhongs");
                });

            modelBuilder.Entity("HotelBooking.Models.LoaiPhong", b =>
                {
                    b.Navigation("Phongs");
                });

            modelBuilder.Entity("HotelBooking.Models.NguoiDung", b =>
                {
                    b.Navigation("DanhGias");

                    b.Navigation("DatPhongs");
                });

            modelBuilder.Entity("HotelBooking.Models.Phong", b =>
                {
                    b.Navigation("DatPhongs");
                });
#pragma warning restore 612, 618
        }
    }
}
